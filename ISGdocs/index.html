<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 STRICT//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="description" content="LIFE documents" />
<meta name="keywords" content="documentation, image analysis,
			       linescan, section,
			       optical microscope, electron
			       microscope, scanned probe, AFM, section, SEM, TEM,
			       optical, Veeco, open source, free software,
			       free beer, freedom, GPL, download,
			       executable, JVM, java, Windows XP,
			       matlab, mathworks " />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="GENERATOR" content="GNU Emacs 21.1.2" />
<title>Image Section Generator Documentation</title>
<link rel=stylesheet type="text/css" href="./chaiken.css">
</head>

<body>

<h1><a href="http://www.exerciseforthereader.org/ISGdocs/">Image
    Section Generator Documentation</a>
</h1>

<p>
Author and Maintainer: <a href="mailto:alchaiken@gmail.com" />Alison Chaiken</a><br/>
650-279-5600<br/>
<p>

<h3>Overview</h3>

<p><a href="SampleOutput.png"><img src="SampleOutput_small.png"></a><br/>Linescans
  generated by Image Section Generator plotted together after
  export.</p>

<p>The purpose of Image Section Generator is to facilitate the
comparison of image data from different kinds of scientific
instruments, primarily optical, electron and scanned-probe
microscopes.  Input images must be in TIFF or JPEG format.  Both color
and grayscale images are supported.  Via an interactive GUI front-end,
users can designate lines of arbitrary length and orientation along
which intensity values (either RGB triplets or grayscale scalars) are
extracted and plotted. ISG can export tab-delimited data to a text
file for import into another plotting or analysis package.  A
representative plot comparing 3 ISG-generated section lines (colors)
with an idealized mask profile (black) can be found in the figure
above.
</p>

<h3>Inspiration</h3>

<p>The original inspiration for ISG comes from
the <a href="http://cms.frontiersin.org/content/10.3389/neuro.16/002.2008/html/fneng-01-002/images/article/image_m/fneng-01-002-g003.jpg">Section
Analysis mode</a>
of <a href="http://www.veeco.com/Products/metrology_and_instrumentation/AFM_SPM/?ts=5/14/2009
2:43:42 PM">Veeco's Atomic Force Microscope</a> image analysis
software.  ISG allows similarly designated sections from optical and
electron microscope images to be replotted with section data exported
from Veeco's software.
</p>


<h3>How to Use ISG</h3>

<p><a href="FileSelection.png"><img src="FileSelection_small.png"></a><br/>File
  Selection dialog</p>

<ol>
<li> Load an image file for analysis by clicking the "Load new image"
button in the upper left "File I/O" panel and selecting a TIFF or JPEG
file from the list.</li>

<li> Still in the File I/O panel, enter the magnification which is
applicable for the image, for example, "30" for 30x.</li>

<li>Optionally examine the image by clicking the "Display image"
button on the "Image controls" panel.  A message at the upper left of
the image shows its size in pixels.</li>

<li> Choose one of two section designation methods:

<ul>

<p><a href="HorizontalSection.png"><img src="HorizontalSection_small.png"></a><br/>Horizontal
  section selected numerically</p>

<li> horizontal or vertical sections ("Row/column numeric input")<br/>

Select "Row/column numeric input" on the "Section selection method"
panel if the section line along which data is extracted should have a
horizontal or vertical orientation and cross the entire image.  Click
"horizontal line" or "vertical line" to select orientation.  Either
use one of the preset buttons to indicate the line position or type a
numeric value in the "Location" window.  Any typed numeric values must
fall within the range of the image size.  For example, a vertical
section on a 480x640 (rows x columns) image must have a numeric
location between 1 and 640.
</li>

<p><a href="ArbitrarySection.png"><img src="ArbitrarySection_small.png"></a><br/>Arbitrarily
  oriented section drawn with cursor</p>

<li> for sections of arbitrary orientation and length ("Draw line with cursor")<br/>

Select "Draw line with cursor" on the "Section selection method"
panel.  The horizontal-vertical controls are irrelevant and disappear.</li>

</ul>

</li>

<li>Click the "Make section plot" button

<ul>
<li> for horizontal and vertical sections ("Row/column numeric input")<br/>

The section plot now appears in its own window.</li>

<li> for sections of arbitrary length and orientation ("Draw line with
cursor")<br/>

The user is presented with the input image.  Move the cross-hair
cursor to the first end-point of the section, depress the left mouse
button, then move to the second end-point and release it.  The section
plot now appears in its own window.</li>

</li>
</ul>

<li>Optionally "Save section data" to tab-delimited columns using a
button on the File I/O menu, or extract a new section from the same
image, or load another file.</li>

</ol>


<h3>Other features:</h3>

<p><a href="GrayscaleWithScalebar.png"><img src="GrayscaleWithScalebar_small.png"></a><br/>Color
  image forced to grayscale with scalebar display</p>

<p>Optionally color images can be analyzed as if they were grayscale by
using a checkbox on the File I/O panel.  The "Analyze as grayscale
data" checkbox is visible only for color images.</p>

<p>A scale bar can be displayed on images by clicking a checkbox on the
"Image controls" panel.  Unchecking this box does not redisplay the
current image but only affects new image windows.  </p>


<h3>Calibration of Image Section Generator</h3>

<p><a href="rulerxsection.jpg"><img src="rulerxsectionsmall.jpg"></a>
<br/>Optical microscope image of a precision scale with an ISG section-line</p>

<p><img src="ruler4x2.png"><br/>ISG-generated line section used for
    calibration of scan lengths</p>


<p>ISG has been calibrated for the author's imaging systems by
  capturing similar views of the same precision scale on all of them
  and changing program constants to match.  To calibrate your system,
  take an image of an object of known dimension and adjust the
</p>

<h3>Installation</h3>

<p>Image Section Generator was created using Mathworks'
  wonderful <a href="http://www.mathworks.com/matlabcentral/">Matlab
  R2009a</a> package.  The current version isn't as bomb-proof or
  featureful as I'd like yet.  If you're looking at a local copy of
  the documentation, be sure to check the latest version on
  the <a href="http://www.exerciseforthereader.org/ISGdocs/">website</a>.
  The source code is released under the terms of
  the <a href="http://gplv3.fsf.org/">Gnu Public License version
  3</a>.  Image Section Generator is free, both as in free beer and as
  in freedom.
</p>


<em>Running from source files using your existing Matlab
  installation (Linux, Solaris, Mac or Windows) </em>

<p>(tested on Fedora 8 and Windows XP)</p>

<ol>

<li>Download the
  source <a href="ImageSectionGeneratorSource.tar.gz">tarball</a>
  or <a href="ISGsrc.zip">Zip archive</a> and unpack:
<pre>
  mkdir ISG
  mv ImageSectionGeneratorSource.tar.gz ISG
  cd ISG
  tar xfz ImageSectionGeneratorSource.tar.gz
</pre>
</li>

<li>Start Matlab and then start GUIDE by typing "guide" at the command
  window >> prompt.
</li>

<li>In the <em>GUIDE Quick Start</em> window that opens, select the
  "Open Existing GUI" tab.   Click on ImageSectionGenerator.fig and
  then push the "Open" button.
</li>

<li>An *editable* GUI opens.   You don't want to edit the GUI, though;
  just type Ctrl-T at this window to run it.
</li>

<li>Image Section Generator will start in its own window.   Follow the
  "How to Use ISG" instructions below.
</li>

</ol>

<em>Running the stand-alone binary independent of Matlab (Linux x86
  only)</em>

<p>(tested only on Fedora 8)</p>

<ol>

<li> Download the
executable <a href="ImageSectionGeneratorExecutable.tar.gz">tarball</a>
and unpack the archive:
<pre>
  mkdir ISG
  mv ImageSectionGeneratorExecutable.tar.gz ISG
  cd ISG
  tar xfz ImageSectionGeneratorExecutable.tar.gz
</pre>
The tarball is large (currently 207 MB) because it includes the Java
Virtual Machine (JVM) you will need to run the program.  (Obviously I
didn't create the JVM; I got it from Mathworks, who got it from Sun.
Sun's license terms apply.)
</li>

<li>Run the MCRInstaller.bin program to install the JVM:

<pre>./MCRInstaller.bin
</pre>

Answer all questions about where you want the JVM and let the
installation complete.   A directory called MATLAB_Compiler_Runtime
will be created.
</li>

<li>Invoke the executable as 
<pre>./run_ImageSectionGenerator.sh $HOME/MATLAB_Compiler_Runtime/v710
</pre>

assuming that the directory MATLAB_Compiler_Runtime is in your home
directory.   (If not, fix the path name.)
</li>

<li>A running Image Section Generator window should open.  Operate the
  application as specified in "How to Use ISG" above.
</li>

</ol>


<em>Running the stand-alone binary independent of Matlab (Windows
  only)</em>

<p>(tested only on Windows XP)</p>

<ol>

<li> Download the
executable <a href="ImageSectionGeneratorWindowsExecutable.zip">zip
archive</a> and unpack into a new folder.  The zip archive is large
(currently 299 MB) because it includes the Java Virtual Machine (JVM)
you will need to run the program.  (Obviously I didn't create the JVM;
I got it from Mathworks, who got it from Sun.  Sun's license terms
apply.)
</li>

<li>Run the program MCInstaller.exe from the DOS shell prompt.  The
  MCR is the MATLAB Compiler Runtime, which is essentially the JVM.

<li>Follow Mathworks' instructions in section 4A of the file
  readme.txt to properly set the PATH environment variable so that
  Windows finds the MCR.
</li>

<li>Now invoking ImageSectionGenerator_pkg.exe should start
Image Section Generator.
</li>

<li>A running Image Section Generator window should open.  Operate the
  application as specified in "How to Use ISG" above.
</li>

</ol>




<h3>Features to be added</h3>

<ol>

<li>Movable markers on the section, as in the Veeco AFM software.
</li>

<li>Optional display of image metadata and output to file.
</li>

<li>Easy, automated scale calibration method.
</li>

</ol>

<h3>Known Bugs</h3>

<p>In Windows, the placement of windows on the screen is poor.  I have
  not tested the Linux version on a variety of screen sizes, and there
  may be problems there as well.</p>

<p>If you see other bugs or have other suggestions for improvement,
  please <a href="mailto:alchaiken@gmail.com" />email me</a>.</p>

</body>
</html>
